<!-- Sección "Habilidades Técnicas": grilla de tarjetas con flip 3D al hacer clic -->
<section id="habilidades-tecnicas" class="tech">
  <!-- Decoración de fondo: puntos, blob animado y figuras flotantes -->
  <div class="tech__bg">
    <div class="tech__bg-dots"></div>
    <div class="tech__bg-blob"></div>
    <div class="tech__bg-shape tech__bg-shape--1"></div>
    <div class="tech__bg-shape tech__bg-shape--2"></div>
  </div>

  <div class="tech__container">
    <!-- Encabezado: ícono + título + línea separadora -->
    <div class="tech__header animate-on-scroll" appAnimateOnScroll>
      <i data-lucide="code-2" class="tech__header-icon"></i>
      <h2 class="tech__header-title">
        <span class="accent">Habilidades</span> Técnicas
      </h2>
      <div class="tech__header-line"></div>
    </div>

    <!-- Grilla de tarjetas flip; el delay escalonado (i * 0.03s) genera aparición en cascada -->
    <div class="tech__grid">
      @for (skill of skills; track skill.name; let i = $index) {
        <!-- --flipped activa la rotación 3D; --mobile-hover simula el estado hover en touch -->
        <div
          class="flip-card animate-on-scroll"
          [class.flip-card--flipped]="flippedIndex === i"
          [class.flip-card--mobile-hover]="activeHoverIndex === i"
          (click)="toggleFlip(i)"
          appAnimateOnScroll
          [animateDelay]="i * 0.03"
        >
          <div class="flip-card__inner">
            <!-- CARA FRONTAL: imagen + nombre de la habilidad -->
            <div class="flip-card__front">
              <div class="flip-card__icon-wrap">
                <img [src]="imgMap[skill.name]" [alt]="skill.name" width="48" height="48">
              </div>
              <span class="flip-card__name">{{ skill.name }}</span>
            </div>
            <!-- CARA POSTERIOR: badge de tag, contexto y estrellas de nivel -->
            <div class="flip-card__back"
              [class.flip-card__back--active]="skill.tag === 'active'"
              [class.flip-card__back--learning]="skill.tag === 'learning'"
            >
              <!-- Badge verde = experiencia práctica; morado = en formación -->
              <span class="flip-card__tag"
                [class.flip-card__tag--active]="skill.tag === 'active'"
                [class.flip-card__tag--learning]="skill.tag === 'learning'"
              >{{ skill.tagLabel }}</span>
              <p class="flip-card__context">{{ skill.context }}</p>
              <!-- Estrellas: starsArray retorna [true/false x5] según el nivel -->
              <div class="flip-card__stars">
                @for (filled of starsArray(skill.level); track $index) {
                  <i data-lucide="star"
                    class="flip-card__star"
                    [class.flip-card__star--filled]="filled"
                    [class.flip-card__star--empty]="!filled"
                  ></i>
                }
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Leyenda de colores del badge (verde = práctica, morado = formación) -->
    <div class="tech__legend animate-on-scroll" appAnimateOnScroll [animateDelay]="0.3">
      <div class="tech__legend-item">
        <span class="tech__legend-dot tech__legend-dot--active"></span>
        <span class="tech__legend-label">Experiencia práctica</span>
      </div>
      <div class="tech__legend-item">
        <span class="tech__legend-dot tech__legend-dot--learning"></span>
        <span class="tech__legend-label">En formación</span>
      </div>
    </div>

    <!-- Pista para el usuario sobre la interacción de flip -->
    <p class="tech__hint animate-on-scroll" appAnimateOnScroll [animateDelay]="0.4">
      Hacé clic en una tarjeta para ver más detalles
    </p>
  </div>
</section>
